{"ast":null,"code":"import fs from \"fs\";\nimport path from \"path\";\nexport function buildPath() {\n  return path.join(process.cwd(), \"dummy-emails.json\");\n}\nexport function extractData(filePath) {\n  const fileData = fs.readFileSync(filePath);\n  const data = JSON.parse(fileData);\n  return data;\n}\nexport default function handler(req, res) {\n  if (req.method === \"POST \") {\n    const email = req.body.email;\n    const filePath = buildPath();\n    const emailList = extractData(filePath);\n    emailList.push({\n      id: new Date(),\n      email\n    });\n    fs.writeFileSync(filePath, JSON.stringify(emailList));\n    res.status(201).json({\n      message: \"heyyooo it worked!\",\n      email: emailList\n    });\n  } else if (req.method === \"GET\") {\n    res.json({\n      message: \"Why are you here? This is an API route\"\n    });\n  }\n}","map":{"version":3,"sources":["/Users/connormackay/Projects/next_lessons/api_routes/section_two/nextjs-course-code/starting-project/pages/api/email/index.js"],"names":["fs","path","buildPath","join","process","cwd","extractData","filePath","fileData","readFileSync","data","JSON","parse","handler","req","res","method","email","body","emailList","push","id","Date","writeFileSync","stringify","status","json","message"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,OAAO,SAASC,SAAT,GAAqB;AAC1B,SAAOD,IAAI,CAACE,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,mBAAzB,CAAP;AACD;AAED,OAAO,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AACpC,QAAMC,QAAQ,GAAGR,EAAE,CAACS,YAAH,CAAgBF,QAAhB,CAAjB;AACA,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAb;AACA,SAAOE,IAAP;AACD;AAED,eAAe,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,MAAID,GAAG,CAACE,MAAJ,KAAe,OAAnB,EAA4B;AAC1B,UAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;AACA,UAAMV,QAAQ,GAAGL,SAAS,EAA1B;AACA,UAAMiB,SAAS,GAAGb,WAAW,CAACC,QAAD,CAA7B;AACAY,IAAAA,SAAS,CAACC,IAAV,CAAe;AACbC,MAAAA,EAAE,EAAE,IAAIC,IAAJ,EADS;AAEbL,MAAAA;AAFa,KAAf;AAKAjB,IAAAA,EAAE,CAACuB,aAAH,CAAiBhB,QAAjB,EAA2BI,IAAI,CAACa,SAAL,CAAeL,SAAf,CAA3B;AAEAJ,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE,oBAAX;AAAiCV,MAAAA,KAAK,EAAEE;AAAxC,KAArB;AACD,GAZD,MAYO,IAAIL,GAAG,CAACE,MAAJ,KAAe,KAAnB,EAA0B;AAC/BD,IAAAA,GAAG,CAACW,IAAJ,CAAS;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAT;AACD;AACF","sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\n\nexport function buildPath() {\n  return path.join(process.cwd(), \"dummy-emails.json\");\n}\n\nexport function extractData(filePath) {\n  const fileData = fs.readFileSync(filePath);\n  const data = JSON.parse(fileData);\n  return data;\n}\n\nexport default function handler(req, res) {\n  if (req.method === \"POST \") {\n    const email = req.body.email;\n    const filePath = buildPath();\n    const emailList = extractData(filePath);\n    emailList.push({\n      id: new Date(),\n      email,\n    });\n\n    fs.writeFileSync(filePath, JSON.stringify(emailList));\n\n    res.status(201).json({ message: \"heyyooo it worked!\", email: emailList });\n  } else if (req.method === \"GET\") {\n    res.json({ message: \"Why are you here? This is an API route\" });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}