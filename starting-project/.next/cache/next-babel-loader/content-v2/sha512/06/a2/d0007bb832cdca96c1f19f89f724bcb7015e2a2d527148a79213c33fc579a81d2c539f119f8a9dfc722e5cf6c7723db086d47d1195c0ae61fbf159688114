{"ast":null,"code":"import fs from 'fs';\nimport path from 'path';\nexport function buildPath() {\n  return path.join(process.cwd(), \"dummy-emails.json\");\n}\nexport function extractData(filePath) {\n  const fileData = fs.readFileSync(filePath);\n  const data = JSON.parse(fileData);\n  return data;\n}\nexport default function handler(req, res) {\n  console.log(\"running handler\");\n  const email = req.body.email;\n  const filePath = buildPath();\n  const emailList = extractData(filePath);\n  emailList.push({\n    id: new Date(),\n    email\n  }); // fs.writeFileSync(filePath, JSON(emailList));\n\n  res.status(201).json({\n    message: \"heyyooo it worked!\"\n  });\n}","map":{"version":3,"sources":["/Users/connormackay/Projects/next_lessons/api_routes/section_two/nextjs-course-code/starting-project/pages/api/email/index.js"],"names":["fs","path","buildPath","join","process","cwd","extractData","filePath","fileData","readFileSync","data","JSON","parse","handler","req","res","console","log","email","body","emailList","push","id","Date","status","json","message"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAGA,OAAO,SAASC,SAAT,GAAqB;AAC1B,SAAOD,IAAI,CAACE,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,mBAAzB,CAAP;AACD;AAED,OAAO,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AACpC,QAAMC,QAAQ,GAAGR,EAAE,CAACS,YAAH,CAAgBF,QAAhB,CAAjB;AACA,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAb;AACA,SAAOE,IAAP;AACD;AAED,eAAe,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,QAAMC,KAAK,GAAGJ,GAAG,CAACK,IAAJ,CAASD,KAAvB;AACA,QAAMX,QAAQ,GAAGL,SAAS,EAA1B;AACA,QAAMkB,SAAS,GAAGd,WAAW,CAACC,QAAD,CAA7B;AACAa,EAAAA,SAAS,CAACC,IAAV,CAAe;AACbC,IAAAA,EAAE,EAAE,IAAIC,IAAJ,EADS;AAEbL,IAAAA;AAFa,GAAf,EALwC,CAUxC;;AAEAH,EAAAA,GAAG,CACES,MADL,CACY,GADZ,EAEKC,IAFL,CAEU;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAFV;AAGD","sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\n\nexport function buildPath() {\n  return path.join(process.cwd(), \"dummy-emails.json\");\n}\n\nexport function extractData(filePath) {\n  const fileData = fs.readFileSync(filePath);\n  const data = JSON.parse(fileData);\n  return data;\n}\n\nexport default function handler(req, res) {\n  console.log(\"running handler\");\n  const email = req.body.email;\n  const filePath = buildPath();\n  const emailList = extractData(filePath);\n  emailList.push({\n    id: new Date(),\n    email,\n  });\n\n  // fs.writeFileSync(filePath, JSON(emailList));\n\n  res\n      .status(201)\n      .json({ message: \"heyyooo it worked!\"});\n}"]},"metadata":{},"sourceType":"module"}